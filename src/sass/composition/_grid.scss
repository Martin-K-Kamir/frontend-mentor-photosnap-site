.grid {
	--_measure            : var(--measure, #{$measure});

	inline-size           : 100%;
	display               : grid;
	grid-template-columns : repeat(auto-fit, minmax(min(var(--_measure, #{$measure}), 100%), 1fr));
}

[data-columns='robust'].grid {
	--_columns            : 1;
	grid-template-columns : repeat(var(--_columns), 1fr);

	@media (width > $width-sm) {
		--_columns : var(--_min);
	}

	@media (width > $width-lg) {
		--_columns : var(--_mid);
	}

	@media (width > 128em) {
		--_columns : var(--_max);
	}

	&:has( > :last-child:nth-child(2n)) {
		--_min    : 1;
		--_mid    : 2;
		--_max    : 2;
	}

	&:has( > :last-child:nth-child(3n)) {
		--_min    : 1;
		--_mid    : 3;
		--_max    : 3;
	}

	&:has( > :last-child:nth-child(4n)) {
		--_min    : 2;
		--_mid    : 4;
		--_max    : 4;
	}

	&:has( > :last-child:nth-child(8n)) {
		--_min    : 2;
		--_mid    : 4;
		--_max    : 8;
	}
}
